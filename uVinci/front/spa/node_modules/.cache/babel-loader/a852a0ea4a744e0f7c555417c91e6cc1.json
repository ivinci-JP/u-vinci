{"ast":null,"code":"import messages from \"../constants/messages\";\nimport statusCodes from \"../constants/statusCodes\";\nconst dataNotFound = {\n  result: [],\n  message: messages.NO_CONTENT,\n  status: statusCodes.NO_CONTENT\n};\nconst badRequest = {\n  result: {},\n  message: messages.BAD_REQUEST,\n  status: statusCodes.BAD_REQUEST\n};\nconst requestTimeout = {\n  result: {},\n  message: messages.REQUEST_TIMEOUT,\n  status: statusCodes.REQUEST_TIMEOUT\n};\nconst internalServerError = {\n  result: {},\n  message: messages.INTERNAL_SERVER_ERROR,\n  status: statusCodes.INTERNAL_SERVER_ERROR\n};\nconst fakeInternalServerError = {\n  id: \"iVinciSince2012\",\n  lat: 35.692973,\n  lng: 139.761738\n};\n\nconst getStub = (functionName, id) => {\n  if (id) {\n    if (id === fakeInternalServerError.id) {\n      return internalServerError;\n    }\n\n    if (id.slice(-1) === \"7\") {\n      return requestTimeout;\n    }\n\n    try {\n      // eslint-disable-next-line import/no-dynamic-require, global-require\n      const detailedInformation = require(`./${functionName}/${id}.json`);\n\n      return {\n        result: detailedInformation,\n        messages: messages.OK,\n        status: statusCodes.OK\n      };\n    } catch {\n      return dataNotFound;\n    }\n  }\n\n  try {\n    // eslint-disable-next-line import/no-dynamic-require, global-require\n    const listForTheFunction = require(`./${functionName}.json`);\n\n    return {\n      result: [...listForTheFunction],\n      //, fakeInternalServerError\n      messages: messages.OK,\n      status: statusCodes.OK\n    };\n  } catch {\n    return dataNotFound;\n  }\n};\n\nconst postStub = ({\n  functionName,\n  id,\n  options,\n  user,\n  like\n}) => {\n  if (options[0] === \"like\") {\n    try {\n      const filePath = `./${functionName}/${id}.json`; // eslint-disable-next-line import/no-dynamic-require, global-require\n\n      const detailedInformation = require(`${filePath}`);\n\n      const newComentoes = like ? [...detailedInformation.comentoes, user] : detailedInformation.comentoes;\n      const result = { ...detailedInformation,\n        comentoes: newComentoes\n      };\n      return {\n        result,\n        messages: messages.OK,\n        status: statusCodes.OK\n      };\n    } catch {\n      return internalServerError;\n    }\n  }\n\n  return badRequest;\n};\n\nconst getParams = urlString => {\n  const {\n    pathname\n  } = new URL(urlString);\n  return pathname.split(\"/\").slice(1);\n};\n\nconst get = urlString => {\n  const [functionName, id] = getParams(urlString);\n  const stubResponse = getStub(functionName, id);\n  return stubResponse;\n};\n\nconst post = (urlString, option) => {\n  try {\n    const {\n      header: {\n        token\n      },\n      body: {\n        user,\n        like = true\n      }\n    } = option;\n\n    if (token == null || user == null) {\n      throw new Error(\"bad request!\");\n    }\n\n    const [functionName, id, ...options] = getParams(urlString);\n    const stubResponse = postStub({\n      functionName,\n      id,\n      options,\n      user,\n      like\n    });\n    return stubResponse;\n  } catch {\n    return badRequest;\n  }\n};\n\nconst uVinciAPIStub = {\n  get,\n  post\n};\nexport default uVinciAPIStub;","map":{"version":3,"sources":["/workspaces/javascript-node/task1/u-vinci/u-vinci_draft/uVinci/front/spa/src/stub/uVinciAPIStub.js"],"names":["messages","statusCodes","dataNotFound","result","message","NO_CONTENT","status","badRequest","BAD_REQUEST","requestTimeout","REQUEST_TIMEOUT","internalServerError","INTERNAL_SERVER_ERROR","fakeInternalServerError","id","lat","lng","getStub","functionName","slice","detailedInformation","require","OK","listForTheFunction","postStub","options","user","like","filePath","newComentoes","comentoes","getParams","urlString","pathname","URL","split","get","stubResponse","post","option","header","token","body","Error","uVinciAPIStub"],"mappings":"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","sourcesContent":["import messages from \"../constants/messages\";\nimport statusCodes from \"../constants/statusCodes\";\n\nconst dataNotFound = {\n  result: [],\n  message: messages.NO_CONTENT,\n  status: statusCodes.NO_CONTENT,\n};\n\nconst badRequest = {\n  result: {},\n  message: messages.BAD_REQUEST,\n  status: statusCodes.BAD_REQUEST,\n};\n\nconst requestTimeout = {\n  result: {},\n  message: messages.REQUEST_TIMEOUT,\n  status: statusCodes.REQUEST_TIMEOUT,\n};\n\nconst internalServerError = {\n  result: {},\n  message: messages.INTERNAL_SERVER_ERROR,\n  status: statusCodes.INTERNAL_SERVER_ERROR,\n};\n\nconst fakeInternalServerError = {\n  id: \"iVinciSince2012\",\n  lat: 35.692973,\n  lng: 139.761738,\n};\n\nconst getStub = (functionName, id) => {\n  if (id) {\n    if (id === fakeInternalServerError.id) {\n      return internalServerError;\n    }\n\n    if (id.slice(-1) === \"7\") {\n      return requestTimeout;\n    }\n\n    try {\n      // eslint-disable-next-line import/no-dynamic-require, global-require\n      const detailedInformation = require(`./${functionName}/${id}.json`);\n\n      return {\n        result: detailedInformation,\n        messages: messages.OK,\n        status: statusCodes.OK,\n      };\n    } catch {\n      return dataNotFound;\n    }\n  }\n\n  try {\n    // eslint-disable-next-line import/no-dynamic-require, global-require\n    const listForTheFunction = require(`./${functionName}.json`);\n\n    return {\n      result: [...listForTheFunction], //, fakeInternalServerError\n      messages: messages.OK,\n      status: statusCodes.OK,\n    };\n  } catch {\n    return dataNotFound;\n  }\n};\n\nconst postStub = ({ functionName, id, options, user, like }) => {\n  if (options[0] === \"like\") {\n    try {\n      const filePath = `./${functionName}/${id}.json`;\n      // eslint-disable-next-line import/no-dynamic-require, global-require\n      const detailedInformation = require(`${filePath}`);\n\n      const newComentoes = like\n        ? [...detailedInformation.comentoes, user]\n        : detailedInformation.comentoes;\n      const result = {\n        ...detailedInformation,\n        comentoes: newComentoes,\n      };\n\n      return {\n        result,\n        messages: messages.OK,\n        status: statusCodes.OK,\n      };\n    } catch {\n      return internalServerError;\n    }\n  }\n\n  return badRequest;\n};\n\nconst getParams = (urlString) => {\n  const { pathname } = new URL(urlString);\n\n  return pathname.split(\"/\").slice(1);\n};\n\nconst get = (urlString) => {\n  const [functionName, id] = getParams(urlString);\n  const stubResponse = getStub(functionName, id);\n\n  return stubResponse;\n};\n\nconst post = (urlString, option) => {\n  try {\n    const {\n      header: { token },\n      body: { user, like = true },\n    } = option;\n\n    if (token == null || user == null) {\n      throw new Error(\"bad request!\");\n    }\n\n    const [functionName, id, ...options] = getParams(urlString);\n    const stubResponse = postStub({ functionName, id, options, user, like });\n\n    return stubResponse;\n  } catch {\n    return badRequest;\n  }\n};\n\nconst uVinciAPIStub = {\n  get,\n  post,\n};\n\nexport default uVinciAPIStub;\n"]},"metadata":{},"sourceType":"module"}